<div class="cheese-tab-section">
  <div class="wrap-page-width">
    <div class="line-title" data-aos="fade-down">
      <hr>
      <h2 class="top-title">{{ section.settings.title }}</h2>
      <hr>
    </div>

    <div class="main-tabs">
      {% assign tab_names = section.blocks | map: 'settings' | map: 'tab_group' | uniq %}

      <!-- Tabs -->
      <div class="tabs-arrows" data-aos="fade-down">
      <ul class="tabs">
        {% for t in tab_names %}
          <li data-tab="menu{{ forloop.index }}">{{ t }}</li>
        {% endfor %}
      </ul>

      <div class="custom-arrows">
      <div class="prev-slide slick-arrow">
       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M169.4 297.4C156.9 309.9 156.9 330.2 169.4 342.7L361.4 534.7C373.9 547.2 394.2 547.2 406.7 534.7C419.2 522.2 419.2 501.9 406.7 489.4L237.3 320L406.6 150.6C419.1 138.1 419.1 117.8 406.6 105.3C394.1 92.8 373.8 92.8 361.3 105.3L169.3 297.3z"/></svg>
      </div>
      <div class="next-slide slick-arrow">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M471.1 297.4C483.6 309.9 483.6 330.2 471.1 342.7L279.1 534.7C266.6 547.2 246.3 547.2 233.8 534.7C221.3 522.2 221.3 501.9 233.8 489.4L403.2 320L233.9 150.6C221.4 138.1 221.4 117.8 233.9 105.3C246.4 92.8 266.7 92.8 279.2 105.3L471.2 297.3z"/></svg>
      </div>
    </div>
      </div>

      <!-- Tab Contents -->
      {% for t in tab_names %}
        <div class="tab-content" id="menu{{ forloop.index }}">
          <div class="mobile-slider" data-aos="fade-up">
  <ul class="collection-list">
    {% for b in section.blocks %}
      {% if b.settings.tab_group == t and b.settings.col %}
        <li>
           <a href="{{ b.settings.col.url }}">
          <div class="tabbing-all-data">
          <div class="img-col">
            {% if b.settings.col.image %}
              <img src="{{ b.settings.col.image | img_url: '400x' }}" alt="{{ b.settings.col.title | escape }}">
            {% endif %}
          </div>
            <h3>{{ b.settings.col.title }}</h3>
            <div class="tabbing-button">
               <a href="{{ b.settings.col.url }}">Shop Now</a>
            </div>
          </div>
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>

   <ul class="collection-list mobile-slide">
    {% for b in section.blocks %}
      {% if b.settings.tab_group == t and b.settings.col %}
        <li>
           <a href="{{ b.settings.col.url }}">
          <div class="tabbing-all-data">
          <div class="img-col">
            {% if b.settings.col.image %}
              <img src="{{ b.settings.col.image | img_url: '400x' }}" alt="{{ b.settings.col.title | escape }}">
            {% endif %}
          </div>
            <h3>{{ b.settings.col.title }}</h3>
            <div class="tabbing-button">
               <a href="{{ b.settings.col.url }}">Shop Now</a>
            </div>
          </div>
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</div>

  <div class="tabbing-mobile">
  <div class="tabbing-mobile-button">
               <a href="{{ b.settings.all_col }}">Shop Now</a>
            </div>
            </div>

</div>

      {% endfor %}
    </div>
  </div>
</div>

<style>

@media (max-width: 767px) {

    .cheese-tab-section .mobile-slider ul.collection-list {
    padding-left: 5px;
}

.cheese-tab-section .mobile-slider.slick-initialized.slick-slider {
    margin-left: -5px;
}

  .cheese-tab-section .mobile-slider ul.collection-list.mobile-slide {
    display: grid !important;
}

  .cheese-tab-section .custom-arrows .slick-arrow svg path {
    fill: #F76E2A;
}

.cheese-tab-section .custom-arrows .slick-arrow {
    padding: 0;
    border: 1px solid #F76E2A;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    z-index: 1;
    background-color: transparent;
}

.cheese-tab-section .custom-arrows .slick-arrow svg {
    width: 14px;
    height: 14px;
}

.cheese-tab-section .tabs-arrows {
    display: flex;
    align-items: center;
}

.cheese-tab-section .custom-arrows {
    display: flex;
    gap: 5px;
}

}

</style>


<script>
$(document).ready(function() {
  var $slider = $('.mobile-slider');

  function initMobileSlick() {
    if ($(window).width() <= 767) {
      if (!$slider.hasClass('slick-initialized')) {
        $slider.slick({
          slidesToShow: 1,
          slidesToScroll: 1,
          dots: false,
          arrows: false, // disable default arrows
          autoplay: true,
          autoplaySpeed: 3000,
          infinite: false
        });

        // custom arrows
        $('.prev-slide').on('click', function(){
          $slider.slick('slickPrev');
        });
        $('.next-slide').on('click', function(){
          $slider.slick('slickNext');
        });
      }
    } else {
      if ($slider.hasClass('slick-initialized')) {
        $slider.slick('unslick');
      }
    }
  }

  // Run on load
  initMobileSlick();

  // Run on resize
  $(window).on('resize', function() {
    initMobileSlick();
  });
});
</script>

{% schema %}
{
  "name": "Tabbed Collections",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading"
    },
    {
      "type": "url",
      "id": "all_col",
      "label": "Collection link"
    }
  ],
  "blocks": [
    {
      "type": "collection_item",
      "name": "Collection Item",
      "settings": [
        {
          "type": "text",
          "id": "tab_group",
          "label": "Tab Name (group)",
          "info": "Collections with the same Tab Name appear in the same tab."
        },
        {
          "type": "collection",
          "id": "col",
          "label": "Choose Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tabbed Collections",
      "category": "Collection"
    }
  ]
}
{% endschema %}

<script>
  $(function(){
    $(".tab-content:first").addClass("active");
    $(".tabs li:first").addClass("active");

    $(".tabs li").on("click", function(){
      var tabId = $(this).data("tab");
      $(".tabs li, .tab-content").removeClass("active");
      $(this).addClass("active");
      $("#" + tabId).addClass("active");
    });
  });
</script>

<style>
 
  .tab-content { display:none; }
  .tab-content.active { display:block; }

</style>
