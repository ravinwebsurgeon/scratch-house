<div class="cheese-tab-section">
<div class="wrap-page-width">
<div class="line-title">
      <hr>
      <h2 class="top-title">{{ section.settings.title }}</h2>
      <hr>
    </div>

      <!-- Tabs -->
    <ul class="tabs">
      {% for block in section.blocks %}
        <li class="tab-btn {% if forloop.first %}active{% endif %}" data-tab="tab-{{ block.id }}">
          {{ block.settings.tab_title }}
        </li>
      {% endfor %}
    </ul>

   <!-- Content -->
<div class="tabs-content">
  {% for block in section.blocks %}
    <div class="tab-panel {% if forloop.first %}active{% endif %}" id="tab-{{ block.id }}">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

        {% assign col_handles = block.settings.collections_list | split: "," %}
        {% for handle in col_handles %}
          {% assign clean_handle = handle | strip %}
          {% assign collection = collections[clean_handle] %}

          {% if collection != blank %}
            <div class="collection-card">
              {% if collection.image %}
                <img src="{{ collection.image | img_url: '600x600' }}" alt="{{ collection.title }}">
              {% elsif block.settings.custom_image != blank %}
                <img src="{{ block.settings.custom_image | img_url: '600x600' }}" alt="{{ collection.title }}">
              {% endif %}
              <h3>{{ collection.title }}</h3>
              <a href="{{ collection.url }}">Shop Now</a>
            </div>
          {% endif %}
        {% endfor %}

      </div>
    </div>
  {% endfor %}
</div>


</div>
</div>


{% stylesheet %}
.tabbed-collections {
  margin: 40px 0;
}
.tabbed-collections .tabs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
  list-style: none;
  padding: 0;
}
.tabbed-collections .tab-btn {
  padding: 8px 16px;
  border: 1px solid #ccc;
  cursor: pointer;
  border-radius: 6px;
  background: #f9f9f9;
  transition: 0.3s;
}
.tabbed-collections .tab-btn.active {
  background: #ff6600;
  color: #fff;
  border-color: #ff6600;
}
.tabbed-collections .tab-panel {
  display: none;
}
.tabbed-collections .tab-panel.active {
  display: block;
}
.collection-card {
  border: 1px solid #eee;
  border-radius: 12px;
  overflow: hidden;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.collection-card img {
  width: 100%;
  height: 220px;
  object-fit: cover;
}
.collection-card h3 {
  font-size: 16px;
  margin: 10px 0;
}
.collection-card a {
  background: #ff6600;
  color: #fff;
  padding: 8px 16px;
  border-radius: 5px;
  display: inline-block;
  margin-bottom: 10px;
  text-decoration: none;
}
{% endstylesheet %}


{% javascript %}
$(document).ready(function(){
  $(".tab-btn").click(function(){
    var tab_id = $(this).attr("data-tab");
    $(".tab-btn").removeClass("active");
    $(".tab-panel").removeClass("active");
    $(this).addClass("active");
    $("#" + tab_id).addClass("active");
  });
});
{% endjavascript %}

{% schema %}
{
  "name": "Tabbing Section",
  "settings": [
    {
    "type": "text",
    "id": "title",
    "label": "Heading"
    }
  ],
   "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "Cheeses"
        },
        {
          "type": "text",
          "id": "collections_list",
          "label": "Collection Handles (comma separated)",
          "default": "frontpage,all"
        },
        {
          "type": "image_picker",
          "id": "custom_image",
          "label": "Fallback Image (if collection image missing)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tabbed Collections",
      "category": "Collection"
    }
  ]
}
{% endschema %}