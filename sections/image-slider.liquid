{{ 'https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css' | stylesheet_tag }}
{{ 'https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css' | stylesheet_tag }}


<section id="slick-slider-{{ section.id }}" class="slick-slider-section page-width">
  <div class="slick-slider-wrapper">
    {% for block in section.blocks %}
      <div class="slick-slide">
        {% if block.settings.link != blank %}
          <a href="{{ block.settings.link }}">
            <img
              src="{{ block.settings.image | image_url: width: 1600 }}"
              alt="{{ block.settings.alt | escape }}"
              loading="lazy"
            >
          </a>
        {% else %}
          <img
            src="{{ block.settings.image | image_url: width: 1600 }}"
            alt="{{ block.settings.alt | escape }}"
            loading="lazy"
          >
        {% endif %}
      </div>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Image Slick Slider",
  "settings": [
    {
      "type": "range",
      "id": "autoplay_speed",
      "label": "Autoplay speed (seconds)",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "slides_to_show",
      "label": "Slides to show (desktop)",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Slide image" },
        { "type": "text", "id": "alt", "label": "Alt text" },
        { "type": "url", "id": "link", "label": "Optional link" }
      ]
    }
  ],
  "presets": [
    { "name": "Image Slick Slider", "category": "Media" }
  ]
}
{% endschema %}

{% javascript %}
document.addEventListener('DOMContentLoaded', function () {
  const slider = $('#slick-slider-{{ section.id }} .slick-slider-wrapper');
  if (slider.length) {
    slider.slick({
      slidesToShow: {{ section.settings.slides_to_show }},
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: {{ section.settings.autoplay_speed | times: 1000 }},
      dots: true,
      arrows: true,
      responsive: [
        { breakpoint: 1024, settings: { slidesToShow: 2 } },
        { breakpoint: 768,  settings: { slidesToShow: 1 } }
      ]
    });
  }
});
{% endjavascript %}

<style>
.slick-slider-section {
  max-width: 100%;
  position: relative;
}
.slick-slider-wrapper img {
  width: 100%;
  height: auto;
  border-radius: 12px;
  display: block;
}
.slick-prev:before, .slick-next:before {
  color: #fff;
  text-shadow: 0 0 6px rgba(0,0,0,0.4);
}
.slick-dots li button:before {
  color: #fff;
  opacity: 0.7;
}
.slick-dots li.slick-active button:before {
  opacity: 1;
}
</style>
